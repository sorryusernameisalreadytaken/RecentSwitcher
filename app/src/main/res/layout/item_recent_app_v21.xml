<?xml version="1.0" encoding="utf-8"?>
<!--
    Variant 21 of the recent app list item. This variant makes both the
    row and the gear focusable and uses BEFORE_DESCENDANTS focus order.
    The row defines nextFocusRight and nextFocusDown to move to the gear
    and to the next app’s details. The gear defines nextFocusLeft,
    nextFocusDown and nextFocusUp to ensure DPAD navigation flows back
    through the app details rather than cycling between gears. This
    variant aims to provide a predictable focus chain closely resembling
    desktop table navigation.
-->
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:padding="8dp"
    android:focusable="true"
    android:focusableInTouchMode="true"
    android:descendantFocusability="beforeDescendants"
    android:nextFocusRight="@id/settings_button"
    android:nextFocusDown="@id/app_text">

    <!-- Left column containing the icon and label -->
    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="horizontal"
        android:gravity="center_vertical">

        <ImageView
            android:id="@+id/app_icon"
            android:layout_width="40dp"
            android:layout_height="40dp"
            android:layout_gravity="center_vertical"
            android:contentDescription="@string/app_icon_desc" />

        <TextView
            android:id="@+id/app_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginStart="12dp"
            android:textAppearance="@style/TextAppearance.AppCompat.Body1" />

    </LinearLayout>

    <!-- Right column containing the settings gear -->
    <ImageButton
        android:id="@+id/settings_button"
        android:layout_width="48dp"
        android:layout_height="48dp"
        android:layout_gravity="center_vertical"
        android:background="?attr/selectableItemBackground"
        android:contentDescription="@string/open_settings_description"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:padding="8dp"
        android:src="@android:drawable/ic_menu_manage"
        android:nextFocusLeft="@id/app_text"
        android:nextFocusDown="@id/app_text"
        android:nextFocusUp="@id/app_text" />

</LinearLayout>