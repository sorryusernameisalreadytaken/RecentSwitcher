<?xml version="1.0" encoding="utf-8"?>
<!--
    Variant 37: Row‑focusable with unfocusable gear (before‑descendants).

    This variant makes the entire row focusable.  The gear button is
    deliberately unfocusable, relying on the ListView key handler to set
    focus to it when DPAD‑RIGHT is pressed.  The root view uses
    BEFORE_DESCENDANTS focus ordering so that focus lands on the row before
    its children.  DPAD‑RIGHT from the row is explicitly routed to the
    gear via `nextFocusRight`.  The gear defines `nextFocusLeft/Up/Down`
    back to the row so that it does not intercept vertical navigation.  Use
    this variant to test a simple row‑centric focus model with manual gear
    navigation.
-->
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/row_root"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:padding="8dp"
    android:focusable="true"
    android:focusableInTouchMode="true"
    android:descendantFocusability="beforeDescendants"
    android:nextFocusRight="@id/settings_button">

    <!-- Left container: content only. -->
    <LinearLayout
        android:id="@+id/app_cell"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="horizontal"
        android:gravity="center_vertical"
        android:focusable="false"
        android:focusableInTouchMode="false">

        <ImageView
            android:id="@+id/app_icon"
            android:layout_width="40dp"
            android:layout_height="40dp"
            android:layout_gravity="center_vertical"
            android:contentDescription="@string/app_icon_desc" />

        <TextView
            android:id="@+id/app_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginStart="12dp"
            android:textAppearance="@style/TextAppearance.AppCompat.Body1" />

    </LinearLayout>

    <!-- Gear: unfocusable; returns focus to row on navigation. -->
    <ImageButton
        android:id="@+id/settings_button"
        android:layout_width="40dp"
        android:layout_height="40dp"
        android:layout_gravity="center_vertical"
        android:background="?attr/selectableItemBackground"
        android:contentDescription="@string/open_settings_description"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:padding="4dp"
        android:src="@android:drawable/ic_menu_manage"
        android:nextFocusLeft="@id/row_root"
        android:nextFocusUp="@id/row_root"
        android:nextFocusDown="@id/row_root" />

</LinearLayout>
